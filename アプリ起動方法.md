# EYM Agent アプリ起動方法

## 現在利用可能な起動方法

### 1. Web版での起動（推奨・最も簡単）

```bash
flutter run -d chrome
```

**特徴：**
- ブラウザで動作するため、追加のセットアップ不要
- HTTP/WebSocketサーバーも正常に動作
- 設定画面、ログ表示、ショートカット管理が全て利用可能

### 2. Windows ネイティブ版（要セットアップ）

現在、以下のエラーが発生します：
```
CMake Error: No CMAKE_CXX_COMPILER could be found.
```

**解決方法：**
1. Visual Studio Community 2022をインストール
2. 「C++によるデスクトップ開発」ワークロードを選択
3. インストール完了後：
```bash
flutter clean
flutter pub get
flutter run -d windows
```

詳細は `WINDOWS_BUILD_SETUP.md` を参照してください。

## アプリの使用方法

### 起動後の画面構成

1. **メイン画面**
   - サーバー状態表示（http://localhost:8765）
   - ショートカットテストボタン（1-9）
   - リアルタイムログ表示

2. **設定画面**（設定ボタンをクリック）
   - 1-9番のショートカット編集テーブル
   - ドラッグ&ドロップでファイル追加
   - 保存・リセット・パス検証機能

### API使用方法

アプリが起動すると、自動的にHTTPサーバーが開始されます：

```bash
# ヘルスチェック
curl http://localhost:8765/health

# ショートカット一覧取得
curl http://localhost:8765/shortcuts

# アプリケーション起動（スマホアプリから送信）
curl -X POST http://localhost:8765/launch \
  -H "Content-Type: application/json" \
  -d '{"button_id": 1}'
```

### テストクライアントの使用

Pythonテストクライアントでスマホアプリの代わりにテストできます：

```bash
# 必要なパッケージをインストール
pip install requests

# テストクライアント実行
python test_client.py
```

## トラブルシューティング

### Web版が起動しない場合
```bash
flutter clean
flutter pub get
flutter run -d chrome
```

### ポート8765が使用中の場合
- 他のアプリケーションがポートを使用している可能性
- タスクマネージャーで確認するか、PCを再起動

### 設定が保存されない場合
- アプリケーションに書き込み権限があるか確認
- 設定ファイルの場所：
  - Windows: `%APPDATA%\eym_agent\shortcuts.json`
  - macOS: `~/Library/Application Support/eym_agent/shortcuts.json`

## 推奨起動手順

1. **初回起動**
```bash
flutter run -d chrome
```

2. **設定を行う**
   - 設定ボタンをクリック
   - 1-9番のボタンにアプリケーションを設定
   - 保存ボタンをクリック

3. **動作確認**
   - メイン画面のテストボタンで動作確認
   - または `python test_client.py` でAPI経由テスト

4. **スマホアプリから接続**
   - スマホアプリから `http://localhost:8765/launch` にPOST送信
   - `{"button_id": 1}` 形式でボタンIDを指定

## 注意事項

- Web版では一部のシステム機能（ファイルアクセスなど）に制限がある場合があります
- 完全な機能を使用するには、Windows ネイティブ版の環境構築を推奨します
- ファイアウォールでポート8765がブロックされていないことを確認してください
